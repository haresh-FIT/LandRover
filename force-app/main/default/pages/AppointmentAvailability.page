<apex:page showHeader="false" sidebar="false" standardStylesheets="false" docType="html-5.0">
    
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Land Rover Test Drive Booking</title>
        
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
                color: #ffffff;
                min-height: 100vh;
            }
            
            .header {
                background: rgba(0, 0, 0, 0.9);
                padding: 20px 0;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
                border-bottom: 2px solid #d4a855;
            }
            
            .header-content {
                max-width: 1400px;
                margin: 0 auto;
                padding: 0 30px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            .logo {
                font-size: 28px;
                font-weight: bold;
                color: #d4a855;
                letter-spacing: 2px;
            }
            
            .tagline {
                color: #999;
                font-size: 14px;
                font-style: italic;
            }
            
            .container {
                max-width: 1400px;
                margin: 40px auto;
                padding: 0 30px;
            }
            
            .hero {
                text-align: center;
                padding: 40px 0;
                margin-bottom: 40px;
            }
            
            .hero h1 {
                font-size: 48px;
                margin-bottom: 15px;
                background: linear-gradient(135deg, #d4a855 0%, #f4d799 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .hero p {
                font-size: 18px;
                color: #aaa;
                max-width: 600px;
                margin: 0 auto;
            }
            
            .search-section {
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                padding: 40px;
                margin-bottom: 40px;
                border: 1px solid rgba(212, 168, 85, 0.2);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            }
            
            .search-title {
                font-size: 24px;
                margin-bottom: 30px;
                color: #d4a855;
                display: flex;
                align-items: center;
            }
            
            .search-icon {
                margin-right: 10px;
                font-size: 28px;
            }
            
            .form-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 25px;
                margin-bottom: 30px;
            }
            
            .form-group {
                position: relative;
            }
            
            .form-group label {
                display: block;
                margin-bottom: 10px;
                color: #d4a855;
                font-size: 14px;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 1px;
            }
            
            .form-group select,
            .form-group input {
                width: 100%;
                padding: 15px 20px;
                background: rgba(0, 0, 0, 0.4);
                border: 2px solid rgba(212, 168, 85, 0.3);
                border-radius: 10px;
                color: #fff;
                font-size: 16px;
                transition: all 0.3s ease;
            }
            
            .form-group select:focus,
            .form-group input:focus {
                outline: none;
                border-color: #d4a855;
                box-shadow: 0 0 20px rgba(212, 168, 85, 0.3);
            }
            
            .form-group select option {
                background: #1a1a1a;
                color: #fff;
            }
            
            .btn-search {
                background: linear-gradient(135deg, #d4a855 0%, #c49845 100%);
                color: #000;
                border: none;
                padding: 18px 50px;
                font-size: 18px;
                font-weight: bold;
                border-radius: 10px;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(212, 168, 85, 0.4);
                text-transform: uppercase;
                letter-spacing: 2px;
            }
            
            .btn-search:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 25px rgba(212, 168, 85, 0.6);
            }
            
            .btn-search:active {
                transform: translateY(0);
            }
            
            .results-section {
                display: none;
                animation: fadeIn 0.5s ease;
            }
            
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            .vehicle-card {
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                padding: 30px;
                margin-bottom: 30px;
                border: 1px solid rgba(212, 168, 85, 0.2);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            }
            
            .vehicle-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 25px;
                padding-bottom: 20px;
                border-bottom: 2px solid rgba(212, 168, 85, 0.2);
            }
            
            .vehicle-info h3 {
                font-size: 28px;
                color: #d4a855;
                margin-bottom: 5px;
            }
            
            .vehicle-info p {
                color: #999;
                font-size: 16px;
            }
            
            .branch-badge {
                background: rgba(212, 168, 85, 0.2);
                padding: 10px 20px;
                border-radius: 25px;
                border: 1px solid #d4a855;
                display: flex;
                align-items: center;
                gap: 8px;
            }
            
            .location-icon {
                font-size: 18px;
            }
            
            .slots-title {
                font-size: 20px;
                margin-bottom: 20px;
                color: #d4a855;
            }
            
            .slots-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
            }
            
            .slot-item {
                background: rgba(0, 0, 0, 0.4);
                border: 2px solid rgba(212, 168, 85, 0.3);
                border-radius: 10px;
                padding: 15px;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
            }
            
            .slot-item:hover {
                background: rgba(212, 168, 85, 0.1);
                border-color: #d4a855;
                transform: translateY(-2px);
            }
            
            .slot-item.selected {
                background: rgba(212, 168, 85, 0.3);
                border-color: #d4a855;
                box-shadow: 0 0 20px rgba(212, 168, 85, 0.4);
            }
            
            .slot-item.unavailable {
                opacity: 0.4;
                cursor: not-allowed;
                border-color: #666;
            }
            
            .slot-item.unavailable:hover {
                background: rgba(0, 0, 0, 0.4);
                border-color: #666;
                transform: none;
            }
            
            .slot-time {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
            }
            
            .slot-status {
                font-size: 12px;
                color: #4caf50;
            }
            
            .slot-status.unavailable {
                color: #f44336;
            }
            
            .booking-section {
                background: rgba(212, 168, 85, 0.1);
                border-radius: 15px;
                padding: 25px;
                margin-top: 20px;
                border: 2px solid #d4a855;
                display: none;
            }
            
            .booking-form {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 20px;
            }
            
            .btn-book {
                background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
                color: white;
                border: none;
                padding: 15px 40px;
                font-size: 16px;
                font-weight: bold;
                border-radius: 10px;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
                text-transform: uppercase;
                letter-spacing: 1px;
            }
            
            .btn-book:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 25px rgba(76, 175, 80, 0.6);
            }
            
            .btn-book:disabled {
                opacity: 0.5;
                cursor: not-allowed;
                transform: none;
            }
            
            .success-message {
                display: none;
                background: rgba(76, 175, 80, 0.2);
                border: 2px solid #4caf50;
                border-radius: 15px;
                padding: 30px;
                text-align: center;
                margin-top: 30px;
                animation: fadeIn 0.5s ease;
            }
            
            .success-message.show {
                display: block;
            }
            
            .success-message h3 {
                font-size: 28px;
                color: #4caf50;
                margin-bottom: 15px;
            }
            
            .success-message p {
                color: #aaa;
                font-size: 16px;
                line-height: 1.6;
            }
            
            .loading {
                display: none;
                text-align: center;
                padding: 40px;
            }
            
            .loading.show {
                display: block;
            }
            
            .spinner {
                border: 4px solid rgba(212, 168, 85, 0.2);
                border-top: 4px solid #d4a855;
                border-radius: 50%;
                width: 60px;
                height: 60px;
                animation: spin 1s linear infinite;
                margin: 0 auto 20px;
            }
            
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            .no-results {
                text-align: center;
                padding: 60px;
                color: #999;
            }
            
            .no-results-icon {
                font-size: 64px;
                margin-bottom: 20px;
            }
            
            .full-width {
                grid-column: 1 / -1;
            }
            
            @media (max-width: 768px) {
                .hero h1 {
                    font-size: 32px;
                }
                
                .form-grid {
                    grid-template-columns: 1fr;
                }
                
                .vehicle-header {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 15px;
                }
                
                .slots-grid {
                    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                }
            }
        </style>
    </head>
    
    <body>
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div>
                    <div class="logo">LAND ROVER</div>
                    <div class="tagline">Above and Beyond</div>
                </div>
                <div style="text-align: right;">
                    <div style="color: #d4a855; font-weight: bold;">VST Grandeur</div>
                    <div class="tagline">Premium Experience</div>
                </div>
            </div>
        </div>
        
        <!-- Main Container -->
        <div class="container">
            <!-- Hero Section -->
            <div class="hero">
                <h1>Book Your Test Drive Experience</h1>
                <p>Discover the extraordinary. Schedule your exclusive test drive with our premium collection of Land Rover vehicles.</p>
            </div>
            
            <!-- Search Section -->
            <div class="search-section">
                <div class="search-title">
                    <span class="search-icon">&#128269;</span>
                    Find Your Perfect Drive
                </div>
                
                <form id="searchForm" onsubmit="return false;">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="model">Select Model</label>
                            <select id="model" required="required">
                                <option value="">Choose a Model</option>
                                <option value="Range Rover">Range Rover</option>
                                <option value="Range Rover Sport">Range Rover Sport</option>
                                <option value="Range Rover Velar">Range Rover Velar</option>
                                <option value="Range Rover Evoque">Range Rover Evoque</option>
                                <option value="Defender">Defender</option>
                                <option value="Discovery">Discovery</option>
                                <option value="Discovery Sport">Discovery Sport</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="variant">Select Variant</label>
                            <select id="variant" required="required">
                                <option value="">Choose a Variant</option>
                                <option value="SE">SE</option>
                                <option value="HSE">HSE</option>
                                <option value="Autobiography">Autobiography</option>
                                <option value="SVAutobiography">SV Autobiography</option>
                                <option value="P400">P400</option>
                                <option value="P525">P525</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="branch">Preferred Branch</label>
                            <select id="branch">
                                <option value="">All Branches</option>
                                <option value="Hyderabad - Jubilee Hills">Hyderabad - Jubilee Hills</option>
                                <option value="Hyderabad - Somajiguda">Hyderabad - Somajiguda</option>
                                <option value="Bangalore - Whitefield">Bangalore - Whitefield</option>
                                <option value="Bangalore - Indiranagar">Bangalore - Indiranagar</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="testDate">Select Date</label>
                            <input type="date" id="testDate" required="required"/>
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button type="button" class="btn-search" onclick="searchSlots()">Search Available Slots</button>
                    </div>
                </form>
            </div>
            
            <!-- Loading -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Searching for available slots...</p>
            </div>
            
            <!-- Results Section -->
            <div id="resultsSection" class="results-section">
                <!-- Vehicle cards will be dynamically inserted here -->
            </div>
            
            <!-- Success Message -->
            <div id="successMessage" class="success-message">
                <h3>&#10004; Appointment Confirmed!</h3>
                <p>Your test drive has been successfully scheduled. We have sent a confirmation to your email with all the details.</p>
                <p style="margin-top: 15px;">Our team will contact you shortly to confirm your booking.</p>
            </div>
        </div>
        
        <script type="text/javascript">
            // Set minimum date to today
            var today = new Date().toISOString().split('T')[0];
            document.getElementById('testDate').setAttribute('min', today);
            
            // Sample vehicle data
            var vehicleData = [
                {
                    id: 1,
                    model: 'Range Rover',
                    variant: 'Autobiography',
                    branch: 'Hyderabad - Jubilee Hills',
                    color: 'Santorini Black',
                    registrationNo: 'TS07AB1234',
                    slots: [
                        { time: '09:00 AM - 10:30 AM', available: true },
                        { time: '11:00 AM - 12:30 PM', available: true },
                        { time: '01:00 PM - 02:30 PM', available: false },
                        { time: '03:00 PM - 04:30 PM', available: true },
                        { time: '05:00 PM - 06:30 PM', available: true }
                    ]
                },
                {
                    id: 2,
                    model: 'Range Rover',
                    variant: 'Autobiography',
                    branch: 'Bangalore - Whitefield',
                    color: 'Byron Blue',
                    registrationNo: 'KA01MN5678',
                    slots: [
                        { time: '09:00 AM - 10:30 AM', available: false },
                        { time: '11:00 AM - 12:30 PM', available: true },
                        { time: '01:00 PM - 02:30 PM', available: true },
                        { time: '03:00 PM - 04:30 PM', available: true },
                        { time: '05:00 PM - 06:30 PM', available: false }
                    ]
                },
                {
                    id: 3,
                    model: 'Defender',
                    variant: 'SE',
                    branch: 'Hyderabad - Somajiguda',
                    color: 'Fuji White',
                    registrationNo: 'TS09CD9012',
                    slots: [
                        { time: '09:00 AM - 10:30 AM', available: true },
                        { time: '11:00 AM - 12:30 PM', available: true },
                        { time: '01:00 PM - 02:30 PM', available: true },
                        { time: '03:00 PM - 04:30 PM', available: false },
                        { time: '05:00 PM - 06:30 PM', available: true }
                    ]
                }
            ];
            
            var selectedSlot = null;
            var selectedVehicle = null;
            
            function searchSlots() {
                var model = document.getElementById('model').value;
                var variant = document.getElementById('variant').value;
                var branch = document.getElementById('branch').value;
                var testDate = document.getElementById('testDate').value;
                
                if (!model || !variant || !testDate) {
                    alert('Please fill in all required fields');
                    return false;
                }
                
                document.getElementById('loading').className = 'loading show';
                document.getElementById('resultsSection').style.display = 'none';
                document.getElementById('successMessage').className = 'success-message';
                
                setTimeout(function() {
                    document.getElementById('loading').className = 'loading';
                    displayResults(model, variant, branch);
                }, 1500);
            }
            
            function displayResults(model, variant, branch) {
                var resultsSection = document.getElementById('resultsSection');
                resultsSection.innerHTML = '';
                
                var filteredVehicles = [];
                for (var i = 0; i < vehicleData.length; i++) {
                    var v = vehicleData[i];
                    var matches = (v.model === model && v.variant === variant);
                    if (branch && branch !== '') {
                        matches = matches && (v.branch === branch);
                    }
                    if (matches) {
                        filteredVehicles.push(v);
                    }
                }
                
                if (filteredVehicles.length === 0) {
                    resultsSection.innerHTML = '<div class="no-results"><div class="no-results-icon">&#128663;</div><h3 style="color: #999; margin-bottom: 10px;">No Vehicles Available</h3><p>We could not find any vehicles matching your criteria. Please try different options.</p></div>';
                    resultsSection.style.display = 'block';
                    return;
                }
                
                for (var i = 0; i < filteredVehicles.length; i++) {
                    var vehicle = filteredVehicles[i];
                    var vehicleCard = createVehicleCard(vehicle);
                    resultsSection.appendChild(vehicleCard);
                }
                
                resultsSection.style.display = 'block';
            }
            
            function createVehicleCard(vehicle) {
                var card = document.createElement('div');
                card.className = 'vehicle-card';
                card.id = 'vehicle-' + vehicle.id;
                
                var slotsHTML = '';
                for (var i = 0; i < vehicle.slots.length; i++) {
                    var slot = vehicle.slots[i];
                    var unavailableClass = slot.available ? '' : 'unavailable';
                    var statusText = slot.available ? '&#10004; Available' : '&#10007; Booked';
                    var statusClass = slot.available ? '' : 'unavailable';
                    
                    slotsHTML += '<div class="slot-item ' + unavailableClass + '" data-vehicle-id="' + vehicle.id + '" data-slot-index="' + i + '" onclick="selectSlot(' + vehicle.id + ', ' + i + ', ' + slot.available + ')"><div class="slot-time">' + slot.time + '</div><div class="slot-status ' + statusClass + '">' + statusText + '</div></div>';
                }
                
                card.innerHTML = '<div class="vehicle-header"><div class="vehicle-info"><h3>' + vehicle.model + ' ' + vehicle.variant + '</h3><p>' + vehicle.color + ' &bull; ' + vehicle.registrationNo + '</p></div><div class="branch-badge"><span class="location-icon">&#128205;</span><span>' + vehicle.branch + '</span></div></div><div class="slots-title">Available Time Slots</div><div class="slots-grid">' + slotsHTML + '</div><div class="booking-section" id="booking-' + vehicle.id + '"><h4 style="color: #d4a855; margin-bottom: 20px;">Complete Your Booking</h4><div class="booking-form"><div class="form-group"><label>Full Name *</label><input type="text" id="name-' + vehicle.id + '" required="required" placeholder="Enter your full name"/></div><div class="form-group"><label>Email *</label><input type="email" id="email-' + vehicle.id + '" required="required" placeholder="your.email@example.com"/></div><div class="form-group"><label>Phone Number *</label><input type="tel" id="phone-' + vehicle.id + '" required="required" placeholder="+91 XXXXX XXXXX"/></div><div class="form-group"><label>Special Requirements</label><input type="text" id="requirements-' + vehicle.id + '" placeholder="Optional"/></div><div class="full-width"><button type="button" class="btn-book" onclick="submitBooking(' + vehicle.id + ')">Confirm Appointment</button></div></div></div>';
                
                return card;
            }
            
            function selectSlot(vehicleId, slotIndex, isAvailable) {
                if (!isAvailable) return;
                
                var allSlots = document.querySelectorAll('.slot-item.selected');
                for (var i = 0; i < allSlots.length; i++) {
                    allSlots[i].className = allSlots[i].className.replace(' selected', '');
                }
                
                var allBookings = document.querySelectorAll('[id^="booking-"]');
                for (var i = 0; i < allBookings.length; i++) {
                    allBookings[i].style.display = 'none';
                }
                
                var clickedSlots = document.querySelectorAll('[data-vehicle-id="' + vehicleId + '"][data-slot-index="' + slotIndex + '"]');
                if (clickedSlots.length > 0) {
                    clickedSlots[0].className += ' selected';
                }
                
                selectedSlot = slotIndex;
                selectedVehicle = vehicleId;
                
                document.getElementById('booking-' + vehicleId).style.display = 'block';
                
                setTimeout(function() {
                    document.getElementById('booking-' + vehicleId).scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'nearest' 
                    });
                }, 100);
            }
            
            function submitBooking(vehicleId) {
                var name = document.getElementById('name-' + vehicleId).value;
                var email = document.getElementById('email-' + vehicleId).value;
                var phone = document.getElementById('phone-' + vehicleId).value;
                
                if (!name || !email || !phone) {
                    alert('Please fill in all required fields');
                    return false;
                }
                
                document.getElementById('successMessage').className = 'success-message show';
                
                document.getElementById('successMessage').scrollIntoView({ 
                    behavior: 'smooth' 
                });
                
                setTimeout(function() {
                    document.getElementById('searchForm').reset();
                    document.getElementById('resultsSection').style.display = 'none';
                    document.getElementById('successMessage').className = 'success-message';
                    selectedSlot = null;
                    selectedVehicle = null;
                }, 5000);
            }
        </script>
    </body>
</apex:page>